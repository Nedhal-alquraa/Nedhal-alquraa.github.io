<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>نضال القراء</title>
    <link rel="stylesheet" href="style_enhanced.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <div class="header">
        <div class="container">
            <img src="nedhal_logo.jpg" alt="Nedhal Logo" width="80" id="nedhalIcon" style="border-radius: 50%; margin-bottom: 1rem;">
            <h1>نضال القراء</h1>
            <p>تتبع تقدمك في القراءة وتحدي نفسك</p>
        </div>
    </div>

    <nav class="nav">
        <div class="container">
            <div class="nav-container">
                <button class="nav-btn active" onclick="showPage('currentResults')">
                    <i class="fas fa-chart-line"></i> القراءة اليومية
                </button>
                <button class="nav-btn" onclick="showPage('currentResults')">
                    <i class="fas fa-trophy"></i> النتائج الحالية
                </button>
                <button class="nav-btn" onclick="showPage('countdown')">
                    <i class="fas fa-hourglass-half"></i> عدادات الطرد
                </button>
                <button class="nav-btn" onclick="showPage('expelled')">
                    <i class="fas fa-user-times"></i> المستحقون للطرد
                </button>
                <button class="nav-btn" onclick="showPage('records')">
                    <i class="fas fa-medal"></i> الأرقام القياسية
                </button>
                <button class="nav-btn" onclick="showPage('seasonsComparison')">
                    <i class="fas fa-calendar-alt"></i> مقارنة المواسم
                </button>
                <button class="nav-btn" onclick="showPage('overall')">
                    <i class="fas fa-chart-bar"></i> النتائج الإجمالية
                </button>
                <button class="nav-btn admin-only" onclick="showPage('admin')">
                    <i class="fas fa-cog"></i> الإدارة
                </button>
            </div>
        </div>
    </nav>

    <div class="main-content">
        <div class="container">
            <!-- Current Results Page -->
            <div id="currentResults" class="page active">
                <!-- Toggle Buttons -->
                <div class="view-toggle">
                    <button id="totalViewBtn" class="view-toggle-btn active" onclick="toggleResultsView('total')">
                        <i class="fas fa-chart-bar"></i> النتائج الإجمالية
                    </button>
                    <button id="individualViewBtn" class="view-toggle-btn" onclick="toggleResultsView('individual')">
                        <i class="fas fa-user"></i> النتائج الفردية
                    </button>
                </div>

                <!-- Total Results View (Original) -->
                <div id="totalResultsView">
                    <div class="card">
                        <h2><i class="fas fa-lightbulb"></i> ترتيب قراء الموسم الحالي</h2>
                        <div class="chart-container">
                            <canvas id="ideasChart"></canvas>
                        </div>
                    </div>

                    <div class="card">
                        <h2><i class="fas fa-fire"></i> ترتيب استمرارية القراء للموسم الحالي</h2>
                        <div class="chart-container">
                            <canvas id="streakChart"></canvas>
                        </div>
                    </div>
                </div>

                <!-- Individual Results View (New) -->
                <div id="individualResultsView" style="display: none;">
                    <!-- Content will be dynamically generated by JavaScript -->
                </div>
            </div>

            <!-- Countdown Page -->
            <div id="countdown" class="page">
                <div class="card">
                    <h2><i class="fas fa-hourglass-half"></i> عدادات الطرد</h2>
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>اسم المشارك</th>
                                    <th>الأيام المتبقية</th>
                                    <th>الحالة</th>
                                    <th>الأفكار الحالية</th>
                                </tr>
                            </thead>
                            <tbody id="countdownBody">
                                <!-- Data will be populated by JavaScript -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Expelled Page -->
            <div id="expelled" class="page">
                <div class="card">
                    <h2><i class="fas fa-user-times"></i> المستحقون للطرد</h2>
                    <div id="expelledContent">
                        <!-- Content will be populated by JavaScript -->
                    </div>
                </div>
            </div>

            <!-- Records Page -->
            <div id="records" class="page">
                <div class="card">
                    <h2><i class="fas fa-medal"></i> الأرقام القياسية - الموسم الحالي</h2>
                    <div class="records-grid" id="recordsGrid">
                        <!-- Records will be populated by JavaScript -->
                    </div>
                </div>
            </div>

            <!-- Seasons Comparison Page -->
            <div id="seasonsComparison" class="page">
                <div class="card">
                    <h2><i class="fas fa-calendar-alt"></i> مقارنة المواسم</h2>
                    <div class="stats-grid" id="seasonsComparisonStats">
                        <!-- Stats will be populated by JavaScript -->
                    </div>
                    <div class="chart-container">
                        <canvas id="seasonsChart"></canvas>
                    </div>
                </div>

                <div class="card">
                    <h2><i class="fas fa-table"></i> مقارنة المواسم</h2>
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>اسم الموسم</th>
                                    <th>عدد المشاركين</th>
                                    <th>عدد المنسحبين</th>
                                </tr>
                            </thead>
                            <tbody id="seasonsTableBody">
                                <!-- Data will be populated by JavaScript -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Overall Results Page -->
            <div id="overall" class="page">
                <!-- Toggle Buttons -->
                <div class="view-toggle">
                    <button id="overallTotalViewBtn" class="view-toggle-btn active" onclick="toggleOverallResultsView('total')">
                        <i class="fas fa-chart-bar"></i> النتائج الإجمالية
                    </button>
                    <button id="overallIndividualViewBtn" class="view-toggle-btn" onclick="toggleOverallResultsView('individual')">
                        <i class="fas fa-user"></i> النتائج الفردية
                    </button>
                </div>

                <!-- Total Results View -->
                <div id="overallTotalResultsView">
                    <div class="card">
                        <h2><i class="fas fa-chart-bar"></i> ترتيب المشاركين حسب إجمالي الأفكار</h2>
                        <div class="chart-container">
                            <canvas id="overallIdeasChart"></canvas>
                        </div>
                    </div>

                    <div class="card">
                        <h2><i class="fas fa-fire"></i> ترتيب المشاركين حسب الأيام المتتالية</h2>
                        <div class="chart-container">
                            <canvas id="overallStreakChart"></canvas>
                        </div>
                    </div>
                </div>

                <!-- Individual Results View -->
                <div id="overallIndividualResultsView" style="display: none;">
                    <!-- Content will be dynamically generated by JavaScript -->
                </div>
            </div>

            <!-- Admin Page -->
            <div id="admin" class="page admin-only">
                <div class="card">
                    <h2><i class="fas fa-exclamation-triangle"></i> التحذيرات</h2>
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>التاريخ</th>
                                    <th>الاسم</th>
                                    <th>المدة</th>
                                </tr>
                            </thead>
                            <tbody id="adminWarnings">
                                <!-- Data will be populated by JavaScript -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Include Chart.js and plugins -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.2.0/dist/chartjs-plugin-datalabels.min.js"></script>
    
    <!-- Include your JavaScript files -->
    <script src="names.js"></script>
    <script src="helper.js"></script>
    <script src="design_enhanced.js"></script>
</body>
</html>